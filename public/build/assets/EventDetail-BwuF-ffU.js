import{r as c,j as e,S as d}from"./app-BIx_ZH_8.js";import{B as n}from"./button-B7UHwpEj.js";import{D as F,a as w,b as v,c as I,d as q,f as K}from"./dialog-Bg0Ax-Sy.js";import{u as $,F as B,a as m,b as x,e as p,c as h,d as j,s as E,o as H,p as S,g as P,n as D}from"./form-X2xTWVBg.js";import{P as L}from"./PartnerLayout-DhACkLz0.js";import{I as u}from"./input-AkzckzGt.js";import{T as V,a as A,b as g,c as l,d as M,e as t}from"./table-DZA52fDt.js";import{C as O}from"./calendar-z7o-I2BN.js";import{C as R}from"./clock-CuMs5brd.js";import{M as W}from"./map-pin-DGZBjRKb.js";import{P as _}from"./plus-CkybSN2G.js";import"./clsx-B-dksMZM.js";import"./utils-CIsb_jhR.js";import"./index-27TSSNlB.js";import"./index-C5JFqwWb.js";import"./x-CPsD-6OO.js";import"./createLucideIcon-Cvm-H_v4.js";import"./layout-dashboard-Clol27QT.js";import"./ticket-CTayPffi.js";import"./log-out-Cd28VW8K.js";const J=H({title:P().min(2).max(50),price:S(a=>Number(a),D()),quota:S(a=>Number(a),D())});function pe({event:a,categories:o}){const[y,b]=c.useState(!1),[C,i]=c.useState(!1),[f,N]=c.useState(null),r=$({resolver:E(J),defaultValues:{title:"",price:0,quota:0}});function k(s){y&&f?d.put(`/partner/event/detail/${a.id}/category/${f.id}`,s,{onSuccess:()=>{console.log("Kategori berhasil diedit"),i(!1),b(!1),N(null)}}):d.post(`/partner/event/${a.id}/category`,s,{onSuccess:()=>{console.log("Berhasil menambahkan kategori baru"),i(!1)}}),i(!1),r.reset({title:"",price:0,quota:0})}const T={...a,date:new Date(`${a.date}T${a.time}`)};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex justify-between mb-4 ",children:[e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("h2",{className:"text-xl font-semibold text-accent-foreground",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:T.date.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsxs("span",{children:[T.date.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"})," ","WIB"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:a.place})]})]}),e.jsxs(F,{open:C,onOpenChange:i,children:[e.jsx(w,{asChild:!0,children:e.jsxs(n,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Tambah Kategori Baru"]})}),e.jsxs(v,{children:[e.jsxs(I,{children:[e.jsx(q,{children:"Kategori"}),e.jsx(K,{children:"Apalah ini"})]}),e.jsx(B,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(k),className:"space-y-8",children:[e.jsx(m,{control:r.control,name:"title",render:({field:s})=>e.jsxs(x,{children:[e.jsx(p,{children:"Nama"}),e.jsx(h,{children:e.jsx(u,{type:"text",...s})}),e.jsx(j,{})]})}),e.jsx(m,{control:r.control,name:"price",render:({field:s})=>e.jsxs(x,{children:[e.jsx(p,{children:"Harga"}),e.jsx(h,{children:e.jsx(u,{type:"number",...s})}),e.jsx(j,{})]})}),e.jsx(m,{control:r.control,name:"quota",render:({field:s})=>e.jsxs(x,{children:[e.jsx(p,{children:"Kuota"}),e.jsx(h,{children:e.jsx(u,{type:"number",...s})}),e.jsx(j,{})]})}),e.jsx(n,{type:"submit",children:"Submit"})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-center font-bold",children:"Poster"}),e.jsx("img",{src:a.poster,alt:a.title})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-center font-bold",children:"Seating Chart"}),e.jsx("img",{src:a.seating_chart,alt:a.title})]})]}),e.jsx("div",{children:e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Kategori"}),e.jsx(l,{children:"Harga"}),e.jsx(l,{children:"Kuota Total"}),e.jsx(l,{children:"Kuota Tersedia"}),e.jsx(l,{children:"Aksi"})]})}),e.jsx(M,{children:o&&o.length>0?o.map(s=>e.jsxs(g,{children:[e.jsx(t,{className:"font-medium",children:s.type}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.quota}),e.jsx(t,{children:s.available_seats}),e.jsx(t,{children:e.jsxs("span",{children:[e.jsx(n,{onClick:()=>{b(!0),N(s),r.setValue("title",s.type),r.setValue("price",s.price),r.setValue("quota",s.quota),i(!0)},className:"hover:underline hover:bg-transparent bg-transparent border-none text-blue-500 p-2 pl-0",children:"Edit"}),""," |"," ",e.jsx(n,{onClick:()=>d.delete(`/partner/event/detail/${a.id}/category/${s.id}`),className:"hover:underline hover:bg-transparent bg-transparent border-none text-red-500 p-2",children:"Hapus"})]})})]},s.id)):e.jsx(g,{children:e.jsx(t,{colSpan:4,className:"text-center text-gray-500",children:"Tidak ada kategori ditemukan."})})})]})})]}),";"]})}export{pe as default};
