import{J as D,r as d,j as e,S as C}from"./app-CBVgBRVl.js";import{A as I,U as p}from"./AdminLayout-CnINWHHE.js";import{S as T}from"./sparkles-RaBATogc.js";import{c as h}from"./createLucideIcon-DxSxY2rl.js";import{T as g}from"./trending-up-B8cUoOYy.js";import{U as P}from"./user-Cq4LSzq7.js";import{T as u}from"./trash-2-CmlapHxR.js";import{C as m}from"./calendar-CzKOdL9f.js";import{C as M}from"./clock-D5JGQBlm.js";import{M as A}from"./map-pin-C_cmYSsY.js";import"./layout-dashboard-CURGNi0B.js";import"./log-out-BBNvm0L0.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_=h("ChevronDown",S);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],F=h("Image",E);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],j=h("TriangleAlert",O),R=({event:s,index:l})=>{const n=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),r=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t);return e.jsx("div",{className:"bg-gray-700/30 rounded-lg p-3 border border-gray-600/20 hover:bg-gray-700/50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[s.poster?e.jsx("img",{src:s.poster,alt:s.title,className:"w-12 h-12 object-cover rounded-md border border-gray-600 flex-shrink-0",loading:"lazy"}):e.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-md flex items-center justify-center border border-gray-600 flex-shrink-0",children:e.jsx(F,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white text-sm mb-1 truncate",children:s.title}),e.jsx("p",{className:"text-xs text-gray-400 mb-2 line-clamp-1",children:s.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[e.jsx(m,{className:"w-3 h-3 text-cyan-400"}),e.jsx("span",{children:n(s.date)}),e.jsx(M,{className:"w-3 h-3 text-emerald-400 ml-1"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[e.jsx(A,{className:"w-3 h-3 text-purple-400"}),e.jsx("span",{className:"truncate",children:s.place})]}),s.revenue>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(g,{className:"w-3 h-3"}),e.jsx("span",{children:r(s.revenue)})]})]})]})]})})},U=({isOpen:s,onClose:l,onConfirm:n,promotorName:r,isLoading:t})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-md w-full p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-red-500/20 p-2 rounded-lg",children:e.jsx(j,{className:"w-6 h-6 text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Konfirmasi Hapus"})]}),e.jsxs("p",{className:"text-gray-300 mb-6",children:["Apakah Anda yakin ingin menghapus promotor"," ",e.jsx("span",{className:"font-semibold text-white",children:r}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-sm text-red-400 mt-2 block",children:"Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:l,disabled:t,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Batal"}),e.jsx("button",{onClick:n,disabled:t,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Menghapus..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4"}),"Hapus"]})})]})]})}):null,B=({promotor:s,isExpanded:l,onToggle:n,onDelete:r})=>{const t=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i);return e.jsxs("div",{className:"bg-gray-800/50 rounded-xl shadow-lg border border-gray-700/30 backdrop-blur-sm hover:shadow-xl transition-shadow duration-300 ",children:[e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[s.profile_picture?e.jsx("img",{src:s.profile_picture,alt:s.name,className:"w-14 h-14 object-cover rounded-full border-2 border-gray-600",loading:"lazy"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center border-2 border-gray-800",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:s.events.length})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-semibold text-lg text-white mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"bg-gray-700 rounded-lg p-2 hover:bg-gray-600 transition-colors",children:e.jsx(_,{className:`w-4 h-4 text-white transition-transform duration-200 ${l?"rotate-180":""}`})}),e.jsx("button",{onClick:r,className:"bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg p-2 transition-colors",children:e.jsx(u,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 mb-1",children:[e.jsx(m,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm",children:"Total Acara"})]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:s.events.length})]}),e.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 mb-1",children:[e.jsx(g,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm",children:"Total Revenue"})]}),e.jsx("p",{className:"text-lg font-semibold text-emerald-400",children:t(s.total_revenue)})]})]})]}),l&&e.jsx("div",{className:"px-5 pb-5",children:e.jsxs("div",{className:"border-t border-gray-700/50 pt-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"text-base font-semibold text-white flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4 text-cyan-400"}),"Daftar Acara"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.events.length," acara tersedia"]})]}),s.events.length>0?e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:s.events.map((i,c)=>e.jsx(R,{event:i,index:c},i.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"bg-gray-600 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",children:e.jsx(m,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Belum ada acara"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Promotor belum membuat acara apapun"})]})]})})]})};function V(){const{promotors:s}=D().props,[l,n]=d.useState(null),[r,t]=d.useState({isOpen:!1,promotorId:null,promotorName:""}),[i,c]=d.useState(!1),N=a=>{n(a===l?null:a)},b=a=>{t({isOpen:!0,promotorId:a.id,promotorName:a.name})},f=async()=>{var a;if(r.promotorId){c(!0);try{const x=await(await fetch(`/admin/partner/${r.promotorId}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}})).json();x.success?(C.reload({only:["promotors"]}),alert(x.message)):alert(x.message||"Terjadi kesalahan saat menghapus promotor")}catch(o){console.error("Error deleting promotor:",o),alert("Terjadi kesalahan saat menghapus promotor")}finally{c(!1),t({isOpen:!1,promotorId:null,promotorName:""})}}},y=()=>{t({isOpen:!1,promotorId:null,promotorName:""})},w=d.useMemo(()=>s.length,[s.length]),v=d.useMemo(()=>s.reduce((a,o)=>a+o.total_revenue,0),[s]),k=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Daftar Promotor"}),e.jsxs("p",{className:"text-gray-400 mt-1 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-cyan-400"}),"Kelola dan pantau semua promotor GOTIX"]}),e.jsxs("a",{href:"https://docs.google.com/spreadsheets/d/18hB5yc3ZBreUPxfnN5WjflZtEcjz0OxW4UX8aQMMTIU/edit?resourcekey=&gid=1101009762#gid=1101009762",className:"text-sm text-blue-400 hover:underline mt-2 inline-flex items-center gap-2",target:"_blank",children:[e.jsx(j,{className:"w-4 h-4 text-yellow-400"}),"Pengajuan Mitra Perlu Tinjauan"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg p-2",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Promotor"}),e.jsx("p",{className:"text-xl font-bold text-white",children:w})]})]})}),e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-lg p-2",children:e.jsx(g,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-emerald-400",children:k(v)})]})]})})]})]}),e.jsx("div",{className:"w-full space-y-4",children:s.map(a=>e.jsx(B,{promotor:a,isExpanded:l===a.id,onToggle:()=>N(a.id),onDelete:()=>b(a)},a.id))}),s.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-700/50 max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Belum Ada Promotor"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Belum ada promotor yang terdaftar di sistem"})]})}),e.jsx(U,{isOpen:r.isOpen,onClose:y,onConfirm:f,promotorName:r.promotorName,isLoading:i})]})})}export{V as default};
